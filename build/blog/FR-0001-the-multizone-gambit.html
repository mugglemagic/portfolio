<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
		<meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)" />
		<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet" />
		
		<link href="../_app/immutable/assets/0.BF8zXpst.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.gJeQT9fj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/XUMD-9Mr.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BNPA_p_8.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.6Y1gGeRj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DCf4JqPx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B-iva8rw.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C8YSO-qe.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BqisEWkp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B4GcWvgj.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.B6H7cPzz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DmT9Q6NN.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D0ihxO46.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dg5uvz-Z.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/IVcZ5moH.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cw41v0MJ.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.DBA4cNcK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/QRiZD35W.js"><!--1mz03nk--><!--[!--><!--]--> <!----><script>(function setInitialMode({ defaultMode = "system", themeColors: themeColors2, darkClassNames: darkClassNames2 = ["dark"], lightClassNames: lightClassNames2 = [], defaultTheme = "", modeStorageKey: modeStorageKey2 = "mode-watcher-mode", themeStorageKey: themeStorageKey2 = "mode-watcher-theme" }) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem(modeStorageKey2) ?? defaultMode;
  const theme = localStorage.getItem(themeStorageKey2) ?? defaultTheme;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  if (light) {
    if (darkClassNames2.length)
      rootEl.classList.remove(...darkClassNames2.filter(Boolean));
    if (lightClassNames2.length)
      rootEl.classList.add(...lightClassNames2.filter(Boolean));
  } else {
    if (lightClassNames2.length)
      rootEl.classList.remove(...lightClassNames2.filter(Boolean));
    if (darkClassNames2.length)
      rootEl.classList.add(...darkClassNames2.filter(Boolean));
  }
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  if (theme) {
    rootEl.setAttribute("data-theme", theme);
    localStorage.setItem(themeStorageKey2, theme);
  }
  localStorage.setItem(modeStorageKey2, mode);
})({"defaultMode":"system","darkClassNames":["dark"],"lightClassNames":[],"defaultTheme":"","modeStorageKey":"mode-watcher-mode","themeStorageKey":"mode-watcher-theme"});</script><!----><!----><!--ojxrft--><meta name="description" content="How we structured our Next.js monorepo with Turborepo zones for maximum scalability and team autonomy."/> <link rel="canonical" href="https://markbasford.com/blog/FR-0001-the-multizone-gambit"/> <meta property="og:type" content="article"/> <meta property="og:url" content="https://markbasford.com/blog/FR-0001-the-multizone-gambit"/> <meta property="og:title" content="The Multizone Gambit | Mark Basford"/> <meta property="og:description" content="How we structured our Next.js monorepo with Turborepo zones for maximum scalability and team autonomy."/> <meta property="og:image" content="https://markbasford.com/headshot.jpg"/> <meta property="og:image:width" content="1200"/> <meta property="og:image:height" content="630"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="The Multizone Gambit | Mark Basford"/> <meta name="twitter:description" content="How we structured our Next.js monorepo with Turborepo zones for maximum scalability and team autonomy."/> <meta name="twitter:image" content="https://markbasford.com/headshot.jpg"/> <!--[--><meta name="author" content="Mark Basford"/> <!--[--><meta property="article:published_time" content="2025-01-16T00:00:00.000Z"/><!--]--> <meta property="article:author" content="Mark Basford"/> <!--[--><meta property="article:tag" content="architecture, scalability, performance, maintainability, turborepo, nextjs"/><!--]--><!--]--> <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Mark Basford","url":"https://markbasford.com","jobTitle":"Frontend Architect","description":"Frontend architect specialising in accessibility-first development","sameAs":["https://www.linkedin.com/in/mark-basford-78a43390/","https://github.com/mugglemagic"],"knowsAbout":["Web Accessibility","Frontend Development","React","Vue","SvelteKit","TypeScript","PHP","Laravel"]}</script><!----> <!--[--><!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"The Multizone Gambit | Mark Basford","description":"How we structured our Next.js monorepo with Turborepo zones for maximum scalability and team autonomy.","datePublished":"2025-01-16T00:00:00.000Z","author":{"@type":"Person","name":"Mark Basford","url":"https://markbasford.com"},"publisher":{"@type":"Person","name":"Mark Basford"}}</script><!----><!--]--><!----><title>The Multizone Gambit | Mark Basford</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!--[!--><!--]--><!----> <a href="#main-content" class="skip-link svelte-supu7d">Skip to main content</a><!----> <div class="flex min-h-screen flex-col"><header class="border-b border-border"><div class="mx-auto flex max-w-4xl items-center justify-between px-6 py-6"><a href="/" class="text-lg font-medium tracking-tight transition-opacity hover:opacity-60">Mark Basford</a> <nav aria-label="Main navigation" class="flex items-center gap-1"><!--[--><a href="/" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-60">Home</a><a href="/about" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-60">About</a><a href="/blog" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-100" aria-current="page">Blog</a><!--]--> <!--[!--><button data-slot="button" class="focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-all focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&amp;_svg:not([class*='size-'])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 min-h-[44px] min-w-[44px]" type="button" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="hidden dark:block"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="block dark:hidden"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><!----></button><!--]--><!----></nav></div></header><!----> <main id="main-content" tabindex="-1" class="flex-1"><!----><!----> <article class="mx-auto max-w-3xl px-6 py-16 md:py-24"><header class="mb-16"><a href="/blog" class="label mb-8 inline-flex min-h-[44px] items-center gap-2 transition-transform hover:opacity-60"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> Back to blog</a> <h1 class="mb-6">The Multizone Gambit</h1> <div class="flex flex-wrap items-center gap-3"><time datetime="2025-01-16T00:00:00.000Z" class="label">16 January 2025</time> <!--[--><span class="text-border">|</span> <!--[--><span class="label">architecture</span><span class="label">scalability</span><span class="label">performance</span><span class="label">maintainability</span><span class="label">turborepo</span><span class="label">nextjs</span><!--]--><!--]--></div></header> <div class="prose"><!--[--><!----><p>Delta Air Lines doesn’t run one enormous airport. They run hubs - Atlanta, Detroit, Minneapolis, Salt Lake City. Each hub operates independently. Each has its own gates, its own ground crews, its own local operations. But they share the same booking system, the same baggage handling protocols, the same safety standards. A plane landing in Atlanta doesn’t need to know how Minneapolis handles de-icing. It just needs to know that when it gets there, the infrastructure will work the same way.</p> <p>We found ourselves thinking about hubs when we started architecting the frontend.</p> <h2>The Monolith Problem</h2> <p>The natural way to build a Next.js application is as a single application. One <code>app/</code> directory, one build process, one deployment. It’s simple, it works, and for many projects it’s exactly right.</p> <p>But we knew where this was heading. We’d seen it before.</p> <p>A single codebase means a single bundle. Every user downloads code for features they’ll never touch. The admin panel ships to candidates. The settings page ships to hiring managers who’ll never visit it. As the application grows, so does everything - build times, bundle sizes, the blast radius of any change.</p> <p>Then there’s the team scaling problem. We don’t have multiple teams today, but we’re building for a future where we might. And if that future arrives, we’d rather not spend six months untangling a monolith. We’ve done that migration before. It’s not fun.</p> <p>So we faced a choice: build the obvious way and refactor later, or pay a small upfront cost for architecture that scales.</p> <p>We chose the upfront cost.</p> <h2>The Realisation</h2> <p>We didn’t start with multizones. We started with a normal Next.js application and a reasonable plan. Then we hit internationalisation.</p> <p>Recruitment software has a lot of words. Job descriptions, application forms, email templates, UI labels - thousands of translatable strings that multiply with every language you support. Our legacy product taught us this scales poorly if you’re not careful.</p> <p>The plan was sensible: segment the translation files. Load only the segments needed for each area. The dashboard doesn’t need admin translations. The candidate portal doesn’t need recruiter strings. Fetch what you need, nothing more.</p> <p>We tried. Multiple i18n packages. Creative loading strategies. Hacks that technically worked but felt like we were fighting the framework.</p> <p>The problem was structural. Next.js, by design, bundles everything together. You can code-split components, but configuration and resources want to be unified. We couldn’t cleanly segment without either duplicating infrastructure or building increasingly baroque workarounds.</p> <p>The huh moment came somewhere around the third i18n library: we were trying to make one application behave like several. What if we just… made it several?</p> <h2>The Hub Architecture</h2> <p>We split the frontend into five independent Next.js applications - zones in Next.js terminology.</p> <pre class="language-undefined"><!----><code class="language-undefined">apps/
├── main/        # The landing pages, public content
├── auth/        # Login, registration, password reset
├── dashboard/   # The main recruiter workspace
├── admin/       # System administration
└── settings/    # User and tenant configuration</code><!----></pre> <p>Each zone is a complete, independent Next.js application. Its own <code>package.json</code>, its own <code>next.config.ts</code>, its own build process. You can run dashboard without auth running. You can deploy admin without touching settings.</p> <p>Nginx handles routing. Requests to <code>/auth</code> go to the auth zone on port 3001. Requests to <code>/dashboard</code> go to port 3002. The main zone catches everything else. From the user’s perspective, it’s one seamless application. From the architecture’s perspective, it’s five independent hubs.</p> <pre class="language-nginx"><!----><code class="language-nginx"><span class="token directive"><span class="token keyword">location</span> /auth</span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://frontend:3001</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token directive"><span class="token keyword">location</span> /dashboard</span> <span class="token punctuation">&#123;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://frontend:3002</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment"># ... and so on</span></code><!----></pre> <h2>Shared Infrastructure</h2> <p>Independent hubs only work if they share common infrastructure. Delta’s hubs work because they use the same booking system, not five incompatible ones.</p> <p>Our shared infrastructure lives in workspace packages:</p> <p><strong>@eos/ui</strong> - The component library. Buttons, inputs, layouts, the Themis accessible components. Every zone imports from the same source. Change a button once, every zone gets the update.</p> <p><strong>@eos/services</strong> - Business logic. API clients, authentication helpers, event handling, utilities. The spokes that connect each hub to the backend.</p> <p><strong>@eos/tsconfig</strong> - TypeScript configuration. The migration to multizones caused TypeScript friction - paths that worked in a monolith broke when we had five <code>tsconfig.json</code> files. So we created shared base configurations. Each zone extends the common defaults, adding only zone-specific overrides. Consistency without duplication.</p> <p>pnpm’s workspace protocol makes this seamless. Zones depend on <code>"@eos/ui": "workspace:*"</code> - always the current local version, no publishing, no version mismatches. Change a shared component, save the file, the zone hot-reloads with the update.</p> <h2>Event-Driven Consistency</h2> <p>Here’s a question: if zones are independent, how do they communicate?</p> <p>The short answer is they mostly don’t need to. Users aren’t running dashboard and admin simultaneously. Navigation between zones is a page load, not a state transfer.</p> <p>But there’s a subtler problem. The same events can originate from different places. A user updates their profile - that might happen from a form submission in the settings zone, or from a WebSocket push from the backend when an admin makes changes. Two sources, same logical event.</p> <p>Without coordination, you end up duplicating logic. The settings zone has its own handler for profile updates. The dashboard has another. When the WebSocket delivers the same event, you write a third handler that does the same thing differently.</p> <p>We use an event-driven pattern instead. Events are standardised across the application - <code>user.profile.updated</code> means the same thing regardless of where it originated. A zone publishes the event, subscribers react. A WebSocket delivers an event, the same subscribers react. One pattern, multiple sources, consistent behaviour.</p> <pre class="language-typescript"><!----><code class="language-typescript"><span class="token comment">// Settings zone updates profile</span>
eventBus<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'user.profile.updated'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> userId<span class="token punctuation">,</span> changes <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Dashboard subscribes once, handles all sources</span>
eventBus<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'user.profile.updated'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>payload<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token function">refreshUserData</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><!----></pre> <p>This isn’t about zones talking to each other in real-time. It’s about maintaining consistency regardless of where events originate.</p> <h2>The Trade-offs</h2> <p>We’re not pretending this is free.</p> <p><strong>More configuration.</strong> Five <code>next.config.ts</code> files. Five <code>package.json</code> files. Nginx routing rules. Turborepo orchestration in <code>turbo.json</code>. There’s more surface area to understand.</p> <p><strong>Development setup.</strong> Five processes running, plus nginx. The first time you run <code>pnpm dev</code> and watch five zones spin up in parallel, it feels like a lot. (Turborepo handles this gracefully, but it’s still more than one process.)</p> <p><strong>Learning curve.</strong> Developers need to understand the zone boundaries. Where does this feature live? Which shared package should this utility go in? The decisions aren’t hard, but they’re decisions that don’t exist in a monolith.</p> <p>We accepted these trade-offs because the alternatives were worse. A monolith that becomes painful to change. Bundle sizes that grow unbounded. A future migration that takes months instead of never being necessary.</p> <h2>What We Gained</h2> <p>Each zone only bundles what it needs. Dashboard users don’t download admin code. The auth zone is tiny - just what’s required to get someone logged in.</p> <p>Turborepo caches aggressively. Change something in the dashboard zone, only dashboard rebuilds. The other four zones pull from cache. Incremental work stays incremental.</p> <p>Team boundaries are physical, not just conventional. You can’t accidentally import dashboard code into admin because they’re separate applications. The architecture enforces what code review would have to catch.</p> <p>And when - if - we ever need true microservices, the extraction path is clear. Each zone already deploys independently. Moving one to a separate repository would be a straightforward migration, not an archaeological expedition.</p> <h2>The Decision That Made Itself</h2> <p>We started with a practical problem: we couldn’t segment translations cleanly. The solution we found addressed problems we hadn’t even prioritised yet - bundle size, team scaling, deployment independence.</p> <p>Sometimes architecture decisions aren’t grand strategic choices. Sometimes you’re just trying to solve a specific problem, and the solution happens to unlock a better structure entirely.</p> <p>Five hubs, shared spokes, independent operations, common standards. It’s more complex than a monolith. It’s less complex than the monolith would have eventually become.</p> <p>The planes land at whichever hub they need. The infrastructure just works.</p> <hr/> <h2>Technical Notes</h2> <p><strong>Zone Locations:</strong> <code>apps/{main,auth,dashboard,admin,settings}/</code></p> <p><strong>Shared Packages:</strong> <code>packages/{ui,services,tsconfig}/</code></p> <p><strong>Key Configuration:</strong></p> <ul><li><code>turbo.json</code> - Task orchestration and caching</li> <li><code>pnpm-workspace.yaml</code> - Workspace and dependency catalog</li> <li><code>frontend.conf</code> - Nginx routing</li></ul> <p><strong>Related Posts:</strong></p> <ul><li>FR-0000: Why We’re Writing This (And Why Now)</li> <li>FR-0011: The Shared Package Strategy (coming soon)</li></ul> <p><strong>Stack:</strong> Next.js 16, Turborepo, pnpm workspaces, nginx</p> <hr/> <h2>A Note on How This Was Written</h2> <p>As with all posts in this series, this was written with AI assistance. The architectural decisions, the i18n problem that triggered the change, and the reasoning are mine. The clarity, hopefully, comes from the collaboration. Every technical claim has been verified against the actual codebase.</p><!----><!--]--></div></article><!----><!----></main> <footer class="border-t border-border"><div class="mx-auto flex max-w-4xl flex-col items-center gap-6 px-6 py-12 sm:flex-row sm:justify-between"><p class="text-sm text-muted-foreground">© 2025 Mark Basford</p> <nav aria-label="Social links" class="flex items-center gap-2"><!--[--><a href="https://www.linkedin.com/in/mark-basford-78a43390/" target="_blank" rel="noopener noreferrer" class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-md p-2 transition-opacity hover:opacity-70 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring" aria-label="LinkedIn (opens in new tab)"><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><!--]--></a><a href="https://github.com/mugglemagic" target="_blank" rel="noopener noreferrer" class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-md p-2 transition-opacity hover:opacity-70 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring" aria-label="GitHub (opens in new tab)"><!--[!--><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><!--]--><!--]--></a><!--]--></nav><!----></div></footer><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_moh665 = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.gJeQT9fj.js"),
						import("../_app/immutable/entry/app.6Y1gGeRj.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
