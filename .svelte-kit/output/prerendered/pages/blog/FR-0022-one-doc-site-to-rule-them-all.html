<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
		<meta name="theme-color" content="#0a0a0a" media="(prefers-color-scheme: dark)" />
		<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
		<link rel="manifest" href="/manifest.webmanifest" />
		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Google+Sans+Code:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet" />
		
		<link href="../_app/immutable/assets/0.BF8zXpst.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.gJeQT9fj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/XUMD-9Mr.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BNPA_p_8.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.6Y1gGeRj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DCf4JqPx.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B-iva8rw.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C8YSO-qe.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BqisEWkp.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B4GcWvgj.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.B6H7cPzz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DmT9Q6NN.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D0ihxO46.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Dg5uvz-Z.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/IVcZ5moH.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Cw41v0MJ.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.DBA4cNcK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/QRiZD35W.js"><!--1mz03nk--><!--[!--><!--]--> <!----><script>(function setInitialMode({ defaultMode = "system", themeColors: themeColors2, darkClassNames: darkClassNames2 = ["dark"], lightClassNames: lightClassNames2 = [], defaultTheme = "", modeStorageKey: modeStorageKey2 = "mode-watcher-mode", themeStorageKey: themeStorageKey2 = "mode-watcher-theme" }) {
  const rootEl = document.documentElement;
  const mode = localStorage.getItem(modeStorageKey2) ?? defaultMode;
  const theme = localStorage.getItem(themeStorageKey2) ?? defaultTheme;
  const light = mode === "light" || mode === "system" && window.matchMedia("(prefers-color-scheme: light)").matches;
  if (light) {
    if (darkClassNames2.length)
      rootEl.classList.remove(...darkClassNames2.filter(Boolean));
    if (lightClassNames2.length)
      rootEl.classList.add(...lightClassNames2.filter(Boolean));
  } else {
    if (lightClassNames2.length)
      rootEl.classList.remove(...lightClassNames2.filter(Boolean));
    if (darkClassNames2.length)
      rootEl.classList.add(...darkClassNames2.filter(Boolean));
  }
  rootEl.style.colorScheme = light ? "light" : "dark";
  if (themeColors2) {
    const themeMetaEl = document.querySelector('meta[name="theme-color"]');
    if (themeMetaEl) {
      themeMetaEl.setAttribute("content", mode === "light" ? themeColors2.light : themeColors2.dark);
    }
  }
  if (theme) {
    rootEl.setAttribute("data-theme", theme);
    localStorage.setItem(themeStorageKey2, theme);
  }
  localStorage.setItem(modeStorageKey2, mode);
})({"defaultMode":"system","darkClassNames":["dark"],"lightClassNames":[],"defaultTheme":"","modeStorageKey":"mode-watcher-mode","themeStorageKey":"mode-watcher-theme"});</script><!----><!----><!--ojxrft--><meta name="description" content="How we built a unified documentation site that serves engineers, product, and AI assistants equally well."/> <link rel="canonical" href="https://markbasford.com/blog/FR-0022-one-doc-site-to-rule-them-all"/> <meta property="og:type" content="article"/> <meta property="og:url" content="https://markbasford.com/blog/FR-0022-one-doc-site-to-rule-them-all"/> <meta property="og:title" content="One Doc Site to Rule Them All | Mark Basford"/> <meta property="og:description" content="How we built a unified documentation site that serves engineers, product, and AI assistants equally well."/> <meta property="og:image" content="https://markbasford.com/headshot.jpg"/> <meta property="og:image:width" content="1200"/> <meta property="og:image:height" content="630"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="One Doc Site to Rule Them All | Mark Basford"/> <meta name="twitter:description" content="How we built a unified documentation site that serves engineers, product, and AI assistants equally well."/> <meta name="twitter:image" content="https://markbasford.com/headshot.jpg"/> <!--[--><meta name="author" content="Mark Basford"/> <!--[--><meta property="article:published_time" content="2025-12-01T00:00:00.000Z"/><!--]--> <meta property="article:author" content="Mark Basford"/> <!--[--><meta property="article:tag" content="architecture, developer-experience, documentation, nextjs, mdx"/><!--]--><!--]--> <!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"Person","name":"Mark Basford","url":"https://markbasford.com","jobTitle":"Frontend Architect","description":"Frontend architect specialising in accessibility-first development","sameAs":["https://www.linkedin.com/in/mark-basford-78a43390/","https://github.com/mugglemagic"],"knowsAbout":["Web Accessibility","Frontend Development","React","Vue","SvelteKit","TypeScript","PHP","Laravel"]}</script><!----> <!--[--><!----><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"One Doc Site to Rule Them All | Mark Basford","description":"How we built a unified documentation site that serves engineers, product, and AI assistants equally well.","datePublished":"2025-12-01T00:00:00.000Z","author":{"@type":"Person","name":"Mark Basford","url":"https://markbasford.com"},"publisher":{"@type":"Person","name":"Mark Basford"}}</script><!----><!--]--><!----><title>One Doc Site to Rule Them All | Mark Basford</title>
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents"><!--[--><!--[--><!----><!--[!--><!--]--><!----> <a href="#main-content" class="skip-link svelte-supu7d">Skip to main content</a><!----> <div class="flex min-h-screen flex-col"><header class="border-b border-border"><div class="mx-auto flex max-w-4xl items-center justify-between px-6 py-6"><a href="/" class="text-lg font-medium tracking-tight transition-opacity hover:opacity-60">Mark Basford</a> <nav aria-label="Main navigation" class="flex items-center gap-1"><!--[--><a href="/" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-60">Home</a><a href="/about" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-60">About</a><a href="/blog" class="min-h-[44px] min-w-[44px] inline-flex items-center justify-center px-4 py-2 text-sm transition-opacity hover:opacity-60 focus-visible:outline-2 focus-visible:outline-offset-4 focus-visible:outline-ring opacity-100" aria-current="page">Blog</a><!--]--> <!--[!--><button data-slot="button" class="focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex shrink-0 items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium outline-none transition-all focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&amp;_svg:not([class*='size-'])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-9 min-h-[44px] min-w-[44px]" type="button" aria-label="Toggle theme"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="hidden dark:block"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="block dark:hidden"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg><!----></button><!--]--><!----></nav></div></header><!----> <main id="main-content" tabindex="-1" class="flex-1"><!----><!----> <article class="mx-auto max-w-3xl px-6 py-16 md:py-24"><header class="mb-16"><a href="/blog" class="label mb-8 inline-flex min-h-[44px] items-center gap-2 transition-transform hover:opacity-60"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg> Back to blog</a> <h1 class="mb-6">One Doc Site to Rule Them All</h1> <div class="flex flex-wrap items-center gap-3"><time datetime="2025-12-01T00:00:00.000Z" class="label">1 December 2025</time> <!--[--><span class="text-border">|</span> <!--[--><span class="label">architecture</span><span class="label">developer-experience</span><span class="label">documentation</span><span class="label">nextjs</span><span class="label">mdx</span><!--]--><!--]--></div></header> <div class="prose"><!--[--><!----><p>In 1086, William the Conqueror had a problem. He’d won England, but he didn’t know what he owned.</p> <p>Twenty years after Hastings, the kingdom was his in name, but the details were scattered across a thousand local records, held by a thousand local lords, written in formats nobody had standardised. What manors existed? How many ploughs worked the land? How many pigs? What was it all worth? William needed to know, and the only way to know was to count.</p> <p>So he sent commissioners to every corner of England. They surveyed every manor, recorded every acre, catalogued every pig. The result was the Domesday Book - a complete inventory of the realm. But here’s the thing: William didn’t move any of it. The pigs stayed in their fields. The manors stayed where they’d always been. The land didn’t relocate to Winchester. He simply created a manifest of what existed and where to find it.</p> <p>Nine centuries later, we faced a similar problem with documentation.</p> <h2>The Duplication Trap</h2> <p>Documentation lives where it’s written. ADRs sit in <code>docs/adr/</code>. Guides live in <code>docs/guides/</code>. Component PRDs nest inside <code>packages/ui/components/themis/docs/prd/</code>. Blog posts accumulate in <code>docs/blogs/</code>. Each document placed deliberately, close to the code it describes, where developers actually look for it.</p> <p>This works brilliantly for development. Need to understand the theme system? The guide is right there in <code>docs/guides/THEMES_GUIDE.md</code>. Working on the Button component? The PRD is in the same directory tree. AI assistants pick up context naturally because the documentation sits alongside the code they’re helping you write.</p> <p>But then you want a documentation site.</p> <p>The obvious approach: copy everything into the docs app. Create a <code>content/</code> directory, duplicate all the markdown, build your pages. The problem is immediate and permanent: you now maintain two copies of every document. Update the telemetry guide? Update it twice. Add a new ADR? Remember to copy it over. Forget once, and your docs site drifts from reality.</p> <p>We’ve seen this pattern before. It never ends well.</p> <h2>The Insight</h2> <p>The documents don’t need to move. They just need to be surveyed.</p> <p>Next.js handles MDX natively. The framework doesn’t care where the markdown lives - it just needs a path to read. A file at <code>../../docs/guides/TELEMETRY_GUIDE.md</code> renders exactly the same as one at <code>content/guides/telemetry.md</code>. The only difference is who maintains the path.</p> <p>So we built our own Domesday Book.</p> <pre class="language-json"><!----><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"guides"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Frontend"</span><span class="token punctuation">,</span>
      <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Telemetry Guide"</span><span class="token punctuation">,</span>
          <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"frontend/telemetry"</span><span class="token punctuation">,</span>
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../../docs/guides/TELEMETRY_GUIDE.md"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
          <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Themes Guide"</span><span class="token punctuation">,</span>
          <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"frontend/themes"</span><span class="token punctuation">,</span>
          <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../../docs/guides/THEMES_GUIDE.md"</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"blog"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Multizone Gambit"</span><span class="token punctuation">,</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"../../docs/blogs/FR-0001-the-multizone-gambit.md"</span><span class="token punctuation">,</span>
      <span class="token property">"slug"</span><span class="token operator">:</span> <span class="token string">"fr-0001-the-multizone-gambit"</span><span class="token punctuation">,</span>
      <span class="token property">"badge"</span><span class="token operator">:</span> <span class="token string">"Series"</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code><!----></pre> <p>The manifest is a survey, not a container. It records where documents live without moving them. Add a new guide to <code>docs/guides/</code>, add a line to the manifest, done. The source of truth remains singular. The pigs stay in their fields.</p> <h2>Two Hours</h2> <p>This took two hours to implement. Not two days, not two sprints. Two hours, working with Claude.</p> <p>That’s not a boast about speed. It’s a statement about preparation.</p> <p>When we chose Next.js, documentation was part of the evaluation. Could we integrate MDX directly? Could we reference files outside the app directory? Could we build a docs site without duplicating content? The answer to all three was yes. We knew this before writing a line of application code.</p> <p>The multizone architecture (FR-0001) meant adding another zone was mechanical. Create the app, configure the port, add the nginx route. The pattern was established. The docs zone just followed it.</p> <p>The MDX support was native. No complex build pipelines, no static site generator bolted onto the side. Next.js reads markdown, renders it, done.</p> <p>Two hours because the hard decisions were already made.</p> <h2>Three Audiences, One Source</h2> <p>The docs site serves three distinct audiences from the same source files:</p> <p><strong>Developers</strong> get documentation where they work. The guides live in <code>docs/guides/</code>, right where you’d look for them. When you’re implementing telemetry, the guide is in context. When AI tools help you write code, they read the same guides you do. The files are positioned for maximum discoverability during development.</p> <p><strong>The Team</strong> gets a searchable, browsable documentation site. No more “where’s that ADR about theme management?” - it’s in the sidebar, organised, linked. New team members can explore the architecture without knowing where to look in the codebase first.</p> <p><strong>Customers</strong> - eventually - get product documentation that lives separately from the code but integrates seamlessly. A training guide can be written by the product team, stored wherever makes sense for them, and pulled into the customer-facing docs through the same manifest pattern. The content updates without deployments.</p> <p>Same files. Different presentations. Zero duplication.</p> <h2>The Kingdom, Catalogued</h2> <p>William’s commissioners didn’t just count pigs for the sake of counting. The Domesday Book let him tax accurately, settle disputes definitively, and understand his kingdom completely. The act of surveying created value that the scattered records never could.</p> <p>Our manifest does the same. The documents existed before. They were useful before. But scattered across directories, they were only useful to those who already knew where to look. The manifest brings them together without moving them, makes them discoverable without duplicating them, presents them professionally without maintaining them twice.</p> <p>Documentation stays current because it lives with the code. It stays useful because it’s presented alongside related docs. It stays maintained because there’s only one copy to maintain.</p> <p>One survey. One source of truth. One doc site to rule them all.</p> <hr/> <h2>Technical Notes</h2> <p><strong>Docs Zone Location:</strong> <code>apps/docs/</code></p> <p><strong>Key Files:</strong></p> <ul><li><code>manifest.json</code> - Maps document paths to slugs and navigation structure</li> <li><code>next.config.ts</code> - MDX configuration with Turbopack compatibility</li> <li><code>lib/mdx.ts</code> - Functions to read and parse MDX from manifest paths</li></ul> <p><strong>Pattern:</strong></p> <ul><li>Documents remain in original locations (<code>docs/</code>, <code>packages/*/docs/</code>)</li> <li>Manifest provides navigation structure and URL slugs</li> <li>MDX files rendered via <code>next-mdx-remote</code> for flexibility</li></ul> <p><strong>Related Posts:</strong></p> <ul><li>FR-0001: The Multizone Gambit (zone architecture)</li> <li>FR-0009: Writing for AI Assistants (documentation as context)</li> <li>FR-0011: The Shared Package Strategy (workspace organisation)</li></ul> <p><strong>Stack:</strong> Next.js 16, MDX, next-mdx-remote, Turbopack</p> <hr/> <h2>A Note on How This Was Written</h2> <p>As with all posts in this series, this was written with AI assistance. The architectural decisions, the Domesday Book parallel, and the reasoning are mine. The clarity, hopefully, comes from the collaboration. Every technical claim has been verified against the actual codebase.</p><!----><!--]--></div></article><!----><!----></main> <footer class="border-t border-border"><div class="mx-auto flex max-w-4xl flex-col items-center gap-6 px-6 py-12 sm:flex-row sm:justify-between"><p class="text-sm text-muted-foreground">© 2025 Mark Basford</p> <nav aria-label="Social links" class="flex items-center gap-2"><!--[--><a href="https://www.linkedin.com/in/mark-basford-78a43390/" target="_blank" rel="noopener noreferrer" class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-md p-2 transition-opacity hover:opacity-70 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring" aria-label="LinkedIn (opens in new tab)"><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></svg><!--]--></a><a href="https://github.com/mugglemagic" target="_blank" rel="noopener noreferrer" class="inline-flex min-h-[44px] min-w-[44px] items-center justify-center rounded-md p-2 transition-opacity hover:opacity-70 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-ring" aria-label="GitHub (opens in new tab)"><!--[!--><!--[--><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg><!--]--><!--]--></a><!--]--></nav><!----></div></footer><!----></div><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_moh665 = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.gJeQT9fj.js"),
						import("../_app/immutable/entry/app.6Y1gGeRj.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
	</body>
</html>
